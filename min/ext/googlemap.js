var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r};define(["require","exports","khesht/utils","async!http://maps.google.com/maps/api/js?sensor=false"],function(n,t,i){return function(n){function t(i,r){var u=this;n.call(this,i[0],r=$.extend({zoom:14,styles:[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}],autoHeight:!0},r));r.autoHeight&&i.height(i[0].offsetWidth*9/16);r.GPS&&t.getGeolocation(function(n){u.setCenter(n);u.setZoom(r.zoom);new google.maps.event.trigger(u,"GPS")})}return __extends(t,n),t.prototype.addMarker=function(n){return new google.maps.Marker({position:n,map:this})},t.LatLng=function(n,t){return new google.maps.LatLng(n,t)},t.getGeolocation=function(n){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(i){n(t.LatLng(i.coords.latitude,i.coords.longitude))},function(n){i.error(n,n.message)}):i.error(null,"Geolocation is not supported by this browser.")},t}(google.maps.Map)})