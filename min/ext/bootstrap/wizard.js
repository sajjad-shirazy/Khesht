var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r};define(["require","exports","khesht/ext/bootstrap/dom","khesht/element"],function(n,t,i,r){var u=function(){function n(){this.str_next="مرحله بعد";this.str_wait="لطفا صبر کنید ...";this.css_btn_next="btn-primary";this.from=0;this.input={}}return n}();return function(n){function t(t,r){n.call(this,i.div());this.pages=t;this.options=$.extend(new u,r);this.pages&&this.pages.length>0&&(this.pageIndex=-1+parseInt(r.from?r.from:0),this.dom.append(this.div_page=i.div(),this.div_message=i.div(),this.btn_next=i.button().addClass("btn-lg btn-block "+this.options.css_btn_next).click(this.btn_next_click.bind(this))),this.next())}return __extends(t,n),t.prototype.btn_next_click=function(){var n=this;this.pageIndex>=0?(i.disable(this.btn_next),this.pages[this.pageIndex].process(this.next.bind(this),function(t){i.enable(n.btn_next);n.message(t,"danger");n.btn_next.text(n.options.str_next)})):this.next()},t.prototype.next=function(n){var t=this;this.pageIndex++;this.pageIndex<this.pages.length&&(this.div_page.empty().append(i.br(3),i.loading(),i.br(3)),this.div_message.empty(),this.btn_next.hide(),this.pages[this.pageIndex].addEventListener("load",function(){t.div_page.empty().append(t.pages[t.pageIndex].DOM);t.pageIndex==t.pages.length-1?t.btn_next.hide():i.enable(t.btn_next.show().text(t.options.str_next))}),this.pages[this.pageIndex].load(n||this.options.input))},t.prototype.message=function(n,t){this.div_message.prepend(i.alert().addClass("alert-"+t).append(n))},t}(r)})